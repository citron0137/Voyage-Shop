# 요구사항 정리

### 고려사항

* 요구사항을 아래에 따라서 나누어 작성함
   * 기능적 요구사항: 어플리케이션 서비스에서 구현될 내용
   * 도메인 요구사항: 도메인 서비스에서 구현될 내용
   * 비기능적 요구사항: 구현시 고려할 내용

### 기능적 요구사항
* 사용자_포인트 조회/충전 기능
   - 사용자 식별자와 포인트 충전 금액을 입력받는 API
   - 사용자별 포인트 잔액 조회 API  

* 상품 조회 API 기능
   - 상품 ID, 이름, 가격, 잔여 수량 정보를 리스트로 제공하는 API  
   - (낮은 우선순위) 상품에 대한 생성/개별 조회/수정/삭제 API 

* 쿠폰 기능
   - 사용자가 선착순으로 N명이 쿠폰을 발급받을 수 있는 API   
   - 본인의 쿠폰을 조회할 수 있는 API

* 주문/결제 API
   - 사용자 식별자와 함께 (상품 ID, 주문 수량) 목록, 사용 쿠폰을 입력받는 API
   - 내부적으로 결제 처리 및 잔액 차감, 쿠폰 사용, 재고 차감까지 해야함  
   - 외부 데이터 플랫폼으로 주문 정보 전송해야함

* 상위 상품 조회 API   
   - 최근 3일간 판매량 기준 상위 5개 상품 정보 제공 API


### 도메인 요구사항

* 사용자_포인트 도메인
   - 사용자별로 포인트 잔액을 저장함
   - 기능
      - 사용자가 생성될 때 사용자_포인트도 생성되어야함
      - 포인트 양을 증가하거나 차감할 수 있어야함
      - 정책에 따라 사용자가 삭제(탈퇴) 되더라도 데이터는 유지함
   - 정책
      - 포인트 잔액은 N원은 넘을 수 없음
      - 포인트 잔액은 0원 미만이 될 수 없음
      - 유저별로 유저_포인트는 하나만 생성될 수 있음 

* 상품 도메인
   - 상품은 ID, 가격, 재고 수량 속성을 가짐
   - 기능
      - 재고 수량은 주문에 따라 감소할 수 있음
      - 재고 수량은 증가할 수도 있음
      - 주문 내역등의 보존을 위해 상품이 삭제되는 경우는 없음 (재고를 0으로 처리)
   - 정책
      - 재고 수량은 0 미만이 될 수 없음
      - 지고 수량은 N을 넘을 수 없음
      - 가격은 0이하 가 될 수 없음

* 쿠폰_사용자 도메인
   - 쿠폰_사용자는 사용자_ID, 할인방법, 할인정도, 사용 여부를 가지고 있음 
   - 기능
      - 쿠폰은 생성될 수 있음 (사용 여부는 기본적으로 사용 이전)
      - 쿠폰을 사용하여 사용 여부를 사용됨으로 변경시킬 수 있음,
      - 쿠폰 사용을 취소하여 쿠폰 사용여부를 사용 이전으로 변경시킬 수 있음
      - 할인 방법, 할인 정도에 따라 할인 금액을 계산할 수 있음
   - 정책
      - 사용된 쿠폰은 다시 사용될 수 없음
      
    

* 쿠폰 이벤트 도메인
   - 쿠폰_이벤트는 할인 방법, 할인 정도, 총 발급 수량, 잔여 발급 수량을 가지고 있음
   - 기능
      - 쿠폰_이벤트를 생성할 수 있음
      - 잔여 발급 수량을 감소시킬 수 있음 
   - 정책
      - 잔여 발급 수량은 0미만이 될 수 없음

* 결제 도메인
   - 결제 금액을 가지고 있음
   - 기능
      - 결제는 완료된 시점에 생성될 수 있음
      - 수정이나 삭제될 수 없음
   - 정책
      - 결제 금액은 0 이하가 될 수 없음

* 주문 도메인   
   - 주문 유저 ID, 주문 상품 ID 별 주문 갯수들,쿠폰 사용 정보, 금액 정보를 가지고 있음
   - 기능
      - 주문은 완료된 시점에 생성될 수 있음
      - 수정이나 삭제될 수 없음
      - 상품 ID별 주문 갯수를 집계하여 조회할 수 있어야함
   - 정책
      - 주문 상품 ID별 주문 갯수는 0 이하가 될 수 없음


### 비기능적 요구사항

* 포인트 기능
   - 동시성 이슈등의 문제가 없어야함

* 주문/결제 기능
   - 동시성 이슈등의 문제가 없어야함

* 공통
   - 다수의 인스턴스에서 서비스가 동시에 구동 될 수 있어야함
   
